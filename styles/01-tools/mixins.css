/**
 * SREƒÜNO UƒåENJE - CSS MIXINS & UTILITIES
 * Reusable CSS patterns for educational platform
 */

/* === MEDIA QUERY MIXINS === */
/* Use with PostCSS custom media or CSS nesting */

@define-mixin mobile-up {
  @media (min-width: 320px) {
    @mixin-content;
  }
}

@define-mixin small-up {
  @media (min-width: 480px) {
    @mixin-content;
  }
}

@define-mixin medium-up {
  @media (min-width: 640px) {
    @mixin-content;
  }
}

@define-mixin large-up {
  @media (min-width: 768px) {
    @mixin-content;
  }
}

@define-mixin xl-up {
  @media (min-width: 1024px) {
    @mixin-content;
  }
}

@define-mixin xxl-up {
  @media (min-width: 1280px) {
    @mixin-content;
  }
}

/* === ACCESSIBILITY MIXINS === */

@define-mixin visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

@define-mixin focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  border-radius: var(--radius-base);
}

@define-mixin touch-target {
  min-height: var(--space-touch-min);
  min-width: var(--space-touch-min);
}

@define-mixin high-contrast {
  @media (prefers-contrast: high) {
    @mixin-content;
  }
}

@define-mixin reduced-motion {
  @media (prefers-reduced-motion: reduce) {
    @mixin-content;
  }
}

/* === LAYOUT MIXINS === */

@define-mixin container {
  width: 100%;
  max-width: var(--container-2xl);
  margin-left: auto;
  margin-right: auto;
  padding-left: var(--space-container-padding);
  padding-right: var(--space-container-padding);
}

@define-mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@define-mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

@define-mixin grid-center {
  display: grid;
  place-items: center;
}

@define-mixin aspect-ratio($width, $height) {
  aspect-ratio: $(width) / $(height);
  
  /* Fallback for older browsers */
  @supports not (aspect-ratio: 1) {
    position: relative;
    overflow: hidden;
    
    &::before {
      content: '';
      display: block;
      padding-top: calc($(height) / $(width) * 100%);
    }
    
    & > * {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }
}

/* === TYPOGRAPHY MIXINS === */

@define-mixin text-display {
  font-size: var(--text-display-size);
  line-height: var(--text-display-line-height);
  font-weight: var(--text-display-weight);
  letter-spacing: var(--text-display-spacing);
  font-family: var(--font-primary);
}

@define-mixin text-h1 {
  font-size: var(--text-h1-size);
  line-height: var(--text-h1-line-height);
  font-weight: var(--text-h1-weight);
  letter-spacing: var(--text-h1-spacing);
  font-family: var(--font-primary);
}

@define-mixin text-h2 {
  font-size: var(--text-h2-size);
  line-height: var(--text-h2-line-height);
  font-weight: var(--text-h2-weight);
  letter-spacing: var(--text-h2-spacing);
  font-family: var(--font-primary);
}

@define-mixin text-h3 {
  font-size: var(--text-h3-size);
  line-height: var(--text-h3-line-height);
  font-weight: var(--text-h3-weight);
  letter-spacing: var(--text-h3-spacing);
  font-family: var(--font-primary);
}

@define-mixin text-body {
  font-size: var(--text-body-size);
  line-height: var(--text-body-line-height);
  font-weight: var(--text-body-weight);
  letter-spacing: var(--text-body-spacing);
  font-family: var(--font-secondary);
}

@define-mixin text-body-large {
  font-size: var(--text-body-large-size);
  line-height: var(--text-body-large-line-height);
  font-weight: var(--text-body-large-weight);
  letter-spacing: var(--text-body-large-spacing);
  font-family: var(--font-secondary);
}

@define-mixin text-caption {
  font-size: var(--text-caption-size);
  line-height: var(--text-caption-line-height);
  font-weight: var(--text-caption-weight);
  letter-spacing: var(--text-caption-spacing);
  font-family: var(--font-secondary);
}

@define-mixin text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

@define-mixin text-balance {
  text-wrap: balance;
}

/* === BUTTON MIXINS === */

@define-mixin button-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-button-padding-y) var(--space-button-padding-x);
  border: none;
  border-radius: var(--radius-button);
  font-size: var(--text-button-size);
  line-height: var(--text-button-line-height);
  font-weight: var(--text-button-weight);
  letter-spacing: var(--text-button-spacing);
  font-family: var(--font-primary);
  text-decoration: none;
  cursor: pointer;
  transition: all var(--transition-base);
  user-select: none;
  @mixin touch-target;
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }
  
  &:focus-visible {
    @mixin focus-visible;
  }
}

@define-mixin button-primary {
  @mixin button-base;
  background-color: var(--color-primary);
  color: white;
  box-shadow: var(--shadow-primary);
  
  &:hover {
    background-color: var(--color-primary-700);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }
  
  &:active {
    background-color: var(--color-primary-800);
    transform: translateY(0);
    box-shadow: var(--shadow-sm);
  }
}

@define-mixin button-secondary {
  @mixin button-base;
  background-color: var(--color-secondary);
  color: white;
  box-shadow: var(--shadow-secondary);
  
  &:hover {
    background-color: var(--color-secondary-700);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }
  
  &:active {
    background-color: var(--color-secondary-800);
    transform: translateY(0);
    box-shadow: var(--shadow-sm);
  }
}

@define-mixin button-outline {
  @mixin button-base;
  background-color: transparent;
  color: var(--color-primary-700);
  border: 2px solid var(--color-primary);
  
  &:hover {
    background-color: var(--color-primary-50);
    border-color: var(--color-primary-700);
    color: var(--color-primary-800);
  }
  
  &:active {
    background-color: var(--color-primary-100);
  }
}

/* === CARD MIXINS === */

@define-mixin card-base {
  background-color: var(--color-surface-primary);
  border-radius: var(--radius-card);
  box-shadow: var(--shadow-sm);
  padding: var(--space-card-padding);
  transition: all var(--transition-base);
  border: 1px solid var(--color-border-primary);
}

@define-mixin card-hover {
  &:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
    border-color: var(--color-border-secondary);
  }
}

@define-mixin card-interactive {
  @mixin card-base;
  @mixin card-hover;
  cursor: pointer;
  
  &:focus-visible {
    @mixin focus-visible;
  }
}

/* === ANIMATION MIXINS === */

@define-mixin fade-in($duration: var(--transition-base)) {
  animation: fade-in $(duration) ease-out;
  
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
}

@define-mixin slide-up($duration: var(--transition-base)) {
  animation: slide-up $(duration) ease-out;
  
  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(var(--space-4));
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

@define-mixin scale-in($duration: var(--transition-base)) {
  animation: scale-in $(duration) var(--ease-spring);
  
  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
}

/* === EDUCATIONAL MIXINS === */

@define-mixin lesson-card {
  @mixin card-interactive;
  border-left: 4px solid var(--color-primary);
  
  &.completed {
    border-left-color: var(--color-success);
    background-color: var(--color-primary);
  }
  
  &.in-progress {
    border-left-color: var(--color-accent);
    background-color: var(--color-primary);
  }
  
  &.locked {
    opacity: 0.6;
    cursor: not-allowed;
    border-left-color: var(--color-gray-300);
    
    &:hover {
      transform: none;
      box-shadow: var(--shadow-sm);
    }
  }
}

@define-mixin quiz-option {
  @mixin button-base;
  background-color: var(--color-surface-primary);
  color: var(--text-primary);
  border: 2px solid var(--color-border-primary);
  text-align: left;
  width: 100%;
  
  &:hover {
    border-color: var(--color-primary);
    background-color: var(--color-primary-50);
  }
  
  &.correct {
    border-color: var(--color-success);
    background-color: var(--color-success-light);
    color: var(--color-success);
  }
  
  &.incorrect {
    border-color: var(--color-error);
    background-color: var(--color-error-light);
    color: var(--color-error);
  }
  
  &.selected {
    border-color: var(--color-primary);
    background-color: var(--color-primary-100);
    color: var(--color-primary-800);
  }
}

/* === CMS MIXINS === */

@define-mixin cms-placeholder {
  background-color: var(--color-primary);
  border: 2px dashed var(--color-border-primary);
  border-radius: var(--radius-card);
  padding: var(--space-card-padding);
  text-align: center;
  min-height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  
  &::before {
    content: 'üå± Sreƒáno uƒçenje';
    font-size: var(--text-h4-size);
    font-weight: var(--font-weight-semibold);
    color: var(--color-primary-700);
    margin-bottom: var(--space-2);
    display: block;
  }
  
  &::after {
    content: 'Sadr≈æaj se uƒçitava iz CMS-a...';
    font-size: var(--text-caption-size);
    color: var(--text-muted);
    display: block;
  }
}

@define-mixin cms-content-area {
  /* Styling for CMS-generated content */
  & h1, & h2, & h3, & h4, & h5, & h6 {
    margin-top: var(--space-heading);
    margin-bottom: var(--space-4);
    
    &:first-child {
      margin-top: 0;
    }
  }
  
  & p {
    margin-bottom: var(--space-paragraph);
    
    &:last-child {
      margin-bottom: 0;
    }
  }
  
  & ul, & ol {
    margin-bottom: var(--space-paragraph);
    padding-left: var(--space-6);
    
    & li {
      margin-bottom: var(--space-list-item);
    }
  }
  
  & img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-lg);
    margin: var(--space-6) 0;
  }
  
  & blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--space-4);
    margin: var(--space-6) 0;
    font-style: italic;
    color: var(--text-secondary);
  }
}